# Перенос функциональности управления расписанием

## Обзор

Функциональность управления расписанием была успешно перенесена из `clientapp` в `clientapp2`. Система позволяет мастерам создавать и управлять своими временными окнами для приема клиентов.

## Перенесенные файлы

### 1. Типы данных
**Файл:** `clientapp2/src/types/schedule.types.ts`
- `TimeSlot` - интерфейс временного окна
- `CreateTimeSlotData` - данные для создания временного окна
- `UpdateTimeSlotData` - данные для обновления временного окна
- `ScheduleDay` - интерфейс дня расписания
- `ScheduleStats` - статистика расписания

### 2. Сервис для работы с API
**Файл:** `clientapp2/src/services/scheduleService.ts`
- `getMySchedule()` - получение расписания мастера
- `addMyTimeSlot()` - добавление временного окна
- `updateMyTimeSlot()` - обновление временного окна
- `deleteMyTimeSlot()` - удаление временного окна
- `getAvailableSlots()` - получение доступных окон
- `blockTimeSlot()` / `unblockTimeSlot()` - блокировка/разблокировка окон

### 3. Компонент управления расписанием
**Файл:** `clientapp2/src/components/ScheduleManager.tsx`
- Календарь для выбора дат
- Множественный выбор дат
- Создание временных окон
- Редактирование и удаление окон
- Создание шаблонов недели
- Применение шаблонов на несколько недель

### 4. Интеграция в дашборд мастера
**Файл:** `clientapp2/src/pages/dashboard/MasterDashboard.tsx`
- Добавлен импорт `ScheduleManager`
- Добавлено состояние `isScheduleManagerOpen`
- Добавлена кнопка "Управление расписанием"
- Добавлен компонент `ScheduleManager` в конец файла

## Функциональность

### Для мастера:
- ✅ Создание временных окон на конкретные даты
- ✅ Редактирование существующих временных окон
- ✅ Удаление временных окон (кроме забронированных)
- ✅ Просмотр всех временных окон в календарном виде
- ✅ Установка статусов: свободно, забронировано, заблокировано
- ✅ Множественный выбор дат для массового создания окон
- ✅ Создание шаблонов недели и применение на несколько недель

### Статусы временных окон:
- **available** - свободно для бронирования
- **booked** - забронировано клиентом
- **blocked** - заблокировано мастером

## Безопасность

- Мастера могут управлять только своими временными окнами
- Забронированные окна нельзя удалить
- Все операции требуют авторизации
- Валидация пересечений временных окон

## Использование

1. Войдите в дашборд мастера
2. Нажмите кнопку "Управление расписанием"
3. Выберите дату или несколько дат
4. Добавьте временные окна
5. При необходимости создайте шаблон недели

## API Endpoints

Система использует следующие эндпоинты:
- `GET /masters/schedule` - получение расписания
- `POST /masters/schedule` - создание временного окна
- `PUT /masters/schedule/:id` - обновление временного окна
- `DELETE /masters/schedule/:id` - удаление временного окна
- `GET /masters/:id/schedule/available` - получение доступных окон

## Зависимости

Компонент использует следующие UI компоненты:
- `@/components/ui/button`
- `@/components/ui/card`
- `@/components/ui/badge`
- `@/components/ui/calendar`
- `@/components/ui/dialog`
- `@/components/ui/label`
- `@/components/ui/input`
- `@/components/ui/select`
- `@/components/ui/checkbox`

## Дата переноса

Функциональность была перенесена: **2024 год** 
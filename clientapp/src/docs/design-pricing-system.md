# Система ценообразования дизайнов

## Обзор

Система ценообразования дизайнов позволяет мастерам гибко настраивать стоимость и время для каждого дизайна в рамках конкретной услуги.

## Как это работает

### 1. Базовая структура

Каждый дизайн в услуге имеет следующие настройки:
- **additionalPrice** - дополнительная стоимость дизайна к базовой цене услуги
- **additionalDuration** - дополнительное время (в минутах)
- **notes** - заметки мастера
- **isActive** - активность дизайна

### 2. Процесс добавления дизайна

1. Мастер выбирает дизайн из своей библиотеки
2. Открывается модальное окно настройки с предзаполненными значениями
3. Мастер может настроить:
   - Цену дизайна (по умолчанию = цена услуги)
   - Дополнительное время (по умолчанию = 0)
   - Заметки
   - Активность дизайна

### 3. Расчет итоговой стоимости

```
Итоговая стоимость = цена услуги + additionalPrice
Общее время = время услуги + additionalDuration
```

### 4. Примеры использования

#### Пример 1: Простой дизайн
- Цена услуги: 2000₽
- Время услуги: 60 мин
- Настройки дизайна:
  - additionalPrice: 0₽ (без доплаты)
  - additionalDuration: 0 мин
- Результат: клиент платит 2000₽ за 60 мин

#### Пример 2: Сложный дизайн с доплатой
- Цена услуги: 2000₽
- Время услуги: 60 мин
- Настройки дизайна:
  - additionalPrice: 1000₽ (доплата)
  - additionalDuration: 30 мин
- Результат: клиент платит 3000₽ за 90 мин

#### Пример 3: Дизайн со скидкой
- Цена услуги: 2000₽
- Время услуги: 60 мин
- Настройки дизайна:
  - additionalPrice: -500₽ (скидка)
  - additionalDuration: 0 мин
- Результат: клиент платит 1500₽ за 60 мин

## Компоненты системы

### AddDesignToServiceModal

Модальное окно для настройки дизайна при добавлении к услуге.

**Функции:**
- Отображение информации о дизайне
- Настройка цены и времени
- Валидация введенных данных
- Предварительный просмотр итоговой стоимости

**Особенности:**
- Автоматический расчет разницы с базовой ценой
- Визуальные индикаторы доплаты/скидки
- Информационная панель с объяснением системы

### EditServiceDesignModal

Модальное окно для редактирования уже добавленного дизайна.

**Функции:**
- Изменение настроек существующего дизайна
- Включение/отключение дизайна
- Обновление заметок

## API Endpoints

### POST /api/masters/services/:serviceId/designs/:designId

Добавление дизайна к услуге.

**Параметры:**
```json
{
  "customPrice": 1000,
  "additionalDuration": 15,
  "notes": "Сложный дизайн с градиентом"
}
```

**Примечание:** `customPrice` в API теперь хранит только дополнительную стоимость дизайна.

### PUT /api/masters/services/:serviceId/designs/:designId

Обновление настроек дизайна.

**Параметры:**
```json
{
  "customPrice": 1500,
  "additionalDuration": 30,
  "notes": "Обновленные заметки",
  "isActive": true
}
```

## База данных

### MasterServiceDesignEntity

```typescript
{
  id: string;
  customPrice?: number;        // Дополнительная стоимость дизайна
  additionalDuration?: number; // Дополнительное время
  notes?: string;             // Заметки мастера
  isActive: boolean;          // Активность дизайна
  masterService: MasterServiceEntity;
  nailDesign: NailDesignEntity;
}
```

## Преимущества системы

1. **Гибкость** - каждый дизайн может иметь свою цену
2. **Прозрачность** - клиент видит точную стоимость
3. **Контроль** - мастер может настраивать цены под сложность
4. **Удобство** - интуитивный интерфейс настройки
5. **Масштабируемость** - легко добавлять новые параметры

## Рекомендации по использованию

1. **Устанавливайте справедливые цены** - учитывайте сложность дизайна
2. **Указывайте точное время** - это поможет с планированием
3. **Используйте заметки** - для внутренней информации
4. **Регулярно обновляйте** - следите за актуальностью цен
5. **Тестируйте на клиентах** - собирайте обратную связь

## Будущие улучшения

- [ ] Массовое редактирование цен
- [ ] Шаблоны ценообразования
- [ ] Аналитика популярности дизайнов
- [ ] Автоматические рекомендации цен
- [ ] Интеграция с календарем для учета времени 
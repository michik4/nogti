# Обновления фильтров расписания мастера

## Обзор

Добавлены удобные кнопки фильтров по дням на ближайшую неделю в модалке просмотра расписания мастера для улучшения навигации и поиска нужных временных окон.

## Внесенные изменения

### 1. Обновлен компонент MasterAvailability
**Файл:** `clientapp2/src/components/master-profile/MasterAvailability.tsx`

**Изменения:**
- Добавлены состояния для фильтрации: `selectedDate`, `filteredSchedule`
- Добавлена функция `getWeekDates()` для генерации дат ближайшей недели
- Добавлена функция `handleDateFilter()` для фильтрации расписания
- Добавлены кнопки фильтров в модалке расписания

## Функциональность фильтров

### Кнопки фильтров:
- **"Все дни"** - показывает полное расписание без фильтрации
- **Кнопки дней недели** - фильтруют расписание по конкретному дню
- **Визуальные индикаторы** - сегодняшний день выделен кольцом
- **Состояние активности** - неактивные дни (без расписания) отключены

### Структура кнопок:
```
[Все дни] [Пн 15] [Вт 16] [Ср 17] [Чт 18] [Пт 19] [Сб 20] [Вс 21]
```

### Логика фильтрации:
- **Выбор даты** - показывает только расписание на выбранный день
- **Повторный клик** - снимает фильтр и показывает все дни
- **Неактивные дни** - кнопки отключены для дней без расписания

## Визуальные улучшения

### Кнопки фильтров:
- **Компактность** - показывают день недели и число
- **Индикация** - сегодняшний день выделен кольцом primary
- **Состояния** - активная/неактивная кнопка
- **Горизонтальная прокрутка** - для мобильных устройств

### Отображение расписания:
- **Фильтрация** - показывается только выбранный день или все дни
- **Сообщения** - адаптивные сообщения при отсутствии расписания
- **Навигация** - удобный переход между днями

## Пользовательский опыт

### Процесс фильтрации:
1. **Открытие модалки** - видно полное расписание
2. **Выбор дня** - клик по кнопке дня недели
3. **Просмотр** - расписание фильтруется по выбранному дню
4. **Сброс фильтра** - клик "Все дни" или повторный клик по дню

### Интерактивность:
- **Hover эффекты** - подсветка при наведении
- **Активные состояния** - выделение выбранного дня
- **Отключенные дни** - визуальное отличие неактивных дней
- **Адаптивность** - горизонтальная прокрутка на мобильных

## Технические детали

### Генерация дат недели:
```typescript
const getWeekDates = () => {
  const dates = [];
  const today = new Date();
  
  for (let i = 0; i < 7; i++) {
    const date = new Date(today);
    date.setDate(today.getDate() + i);
    dates.push({
      date: date.toISOString().split('T')[0],
      dayName: date.toLocaleDateString('ru-RU', { weekday: 'short' }),
      dayNumber: date.getDate(),
      isToday: i === 0
    });
  }
  
  return dates;
};
```

### Фильтрация расписания:
```typescript
const handleDateFilter = (date: string) => {
  if (date === selectedDate) {
    // Сброс фильтра
    setSelectedDate('');
    setFilteredSchedule(fullSchedule);
  } else {
    // Применение фильтра
    setSelectedDate(date);
    const filtered = fullSchedule.filter(day => day.date === date);
    setFilteredSchedule(filtered);
  }
};
```

### Проверка наличия расписания:
```typescript
const hasSchedule = fullSchedule.some(day => day.date === date);
```

## Структура интерфейса

### Модалка расписания:
- **Заголовок** - "Расписание мастера"
- **Фильтры** - кнопки дней недели и "Все дни"
- **Содержимое** - отфильтрованное расписание
- **Сообщения** - адаптивные сообщения при отсутствии данных

### Кнопки фильтров:
- **Размер** - компактные кнопки (size="sm")
- **Варианты** - default для активного, outline для неактивного
- **Содержимое** - день недели и число
- **Индикация** - кольцо для сегодняшнего дня

## Адаптивность

### Мобильные устройства:
- **Горизонтальная прокрутка** - для кнопок фильтров
- **Компактность** - небольшие кнопки с текстом
- **Touch-friendly** - удобные размеры для касания

### Десктоп:
- **Полная ширина** - кнопки располагаются в ряд
- **Hover эффекты** - интерактивность при наведении
- **Читаемость** - четкое отображение дней недели

## Дата обновления

Обновления внесены: **2024 год** 
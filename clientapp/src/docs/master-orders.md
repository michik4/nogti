# Управление заказами в дашборде мастера

## Обзор

Система управления заказами позволяет мастерам эффективно обрабатывать входящие заказы, отслеживать их статусы и взаимодействовать с клиентами.

## Компоненты

### MasterOrdersTab

Основной компонент для отображения и управления заказами мастера.

**Расположение:** `client/src/pages/dashboard/components/MasterOrdersTab.tsx`

**Функциональность:**
- Отображение заказов с фильтрацией по статусам
- Управление статусами заказов
- Просмотр деталей заказов
- Взаимодействие с клиентами

### Статусы заказов

Система поддерживает следующие статусы заказов:

- **PENDING** - Ожидает ответа мастера
- **CONFIRMED** - Подтверждена мастером
- **ALTERNATIVE_PROPOSED** - Мастер предложил другое время
- **DECLINED** - Отклонена мастером
- **TIMEOUT** - Мастер не ответил в течение 5 минут
- **COMPLETED** - Выполнена
- **CANCELLED** - Отменена

## Функциональность

### Фильтрация заказов

Заказы группируются по следующим вкладкам:

1. **Ожидают** - заказы со статусом PENDING
2. **Активные** - заказы со статусами CONFIRMED и ALTERNATIVE_PROPOSED
3. **Завершенные** - заказы со статусами COMPLETED, CANCELLED и DECLINED
4. **Все** - все заказы без фильтрации

### Действия мастера

#### Для заказов в статусе PENDING:
- **Подтвердить** - переводит заказ в статус CONFIRMED
- **Отклонить** - переводит заказ в статус DECLINED
- **Предложить время** - переводит заказ в статус ALTERNATIVE_PROPOSED

#### Для всех заказов:
- **Подробнее** - открывает модальное окно с деталями заказа

### Отображение информации

Каждая карточка заказа содержит:
- Информацию о клиенте (имя, аватар)
- Название услуги
- Дизайн (если выбран)
- Запрошенное время
- Предложенное время (если есть)
- Подтвержденное время (если есть)
- Цену услуги
- Продолжительность
- Заметки клиента и мастера
- Статус заказа

## Интеграция с дашбордом

### Добавление вкладки заказов

В основном дашборде мастера добавлена третья вкладка "Заказы" наряду с "Услуги" и "Дизайны".

### Статистика

Карточка статистики "Ожидает ответа" стала интерактивной:
- При клике переключает на вкладку заказов
- Показывает анимированную точку при наличии ожидающих заказов
- Отображает количество заказов, требующих ответа

## API интеграция

Компонент использует следующие методы из `orderService`:

- `getUserOrders()` - получение заказов пользователя
- `confirmOrder()` - подтверждение заказа
- `declineOrder()` - отклонение заказа
- `proposeAlternativeTime()` - предложение альтернативного времени

## Стилизация

Компонент использует CSS модуль `MasterOrdersTab.module.css` для:
- Стилизации карточек заказов
- Анимации при наведении
- Цветовой индикации статусов
- Адаптивного дизайна

## Обработка ошибок

Система включает:
- Обработку ошибок загрузки
- Состояния загрузки для всех действий
- Уведомления об успехе/ошибке через toast
- Повторную попытку при ошибках

## Адаптивность

Компонент адаптирован для:
- Десктопных устройств
- Планшетов
- Мобильных устройств

На мобильных устройствах:
- Кнопки действий располагаются вертикально
- Изображения дизайнов уменьшены
- Улучшена читаемость текста

## Будущие улучшения

Планируемые функции:
- Массовые операции с заказами
- Экспорт данных о заказах
- Уведомления в реальном времени
- Интеграция с календарем
- Автоматические напоминания
- Система рейтингов после выполнения заказа 